<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>English Learning Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
 margin:0;
 font-family:Arial,Helvetica,sans-serif;
 background:linear-gradient(135deg,#4facfe,#00f2fe);
 min-height:100vh;
 color:#fff;
 text-align:center;
}
.hidden{display:none}
.container{max-width:520px;margin:auto;padding:20px}
.card{
 background:rgba(255,255,255,.15);
 border-radius:20px;
 padding:20px;
 margin-top:20px;
 backdrop-filter:blur(10px);
 box-shadow:0 10px 30px rgba(0,0,0,.3);
}
.btn{
 width:100%;
 padding:14px;
 border:none;
 border-radius:16px;
 margin:8px 0;
 font-size:16px;
 font-weight:bold;
 cursor:pointer;
 background:#fff;
 color:#0077ff;
}
.btn.dark{background:#222;color:#fff}
.grid{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
 gap:10px;
}
.option{
 background:#fff;
 color:#0077ff;
 padding:12px;
 border-radius:14px;
 margin:6px 0;
 cursor:pointer;
 font-weight:bold;
}
.correct{background:#2ecc71;color:#000}
.wrong{background:#e74c3c;color:#fff}
.timer{font-size:18px;font-weight:bold}
.big{font-size:80px}
</style>
</head>

<body>
<div class="container">

<!-- HOME -->
<div id="home">
 <div class="card">
  <h1>üéÆ English Game</h1>
  <button class="btn" onclick="openCategories()">‚ñ∂ START</button>
  <button class="btn dark" onclick="openReviewMenu()">üìò REVIEW</button>
 </div>
</div>

<!-- CATEGORY -->
<div id="categories" class="hidden">
 <h2>Pilih Kategori</h2>
 <div id="categoryList" class="grid"></div>
 <button class="btn dark" onclick="goHome()">‚¨Ö Kembali</button>
</div>

<!-- GAME -->
<div id="game" class="hidden">
 <div class="timer">‚è± <span id="time">10</span></div>
 <div class="card">
  <div id="icon" class="big"></div>
  <h2 id="question"></h2>
 </div>
 <div id="options"></div>
</div>

<!-- GAME OVER -->
<div id="over" class="hidden">
 <div class="card">
  <h1>Game Over</h1>
  <h2 id="finalScore"></h2>
  <button class="btn" onclick="openCategories()">Main Lagi</button>
  <button class="btn dark" onclick="goHome()">Home</button>
 </div>
</div>

<!-- REVIEW MENU -->
<div id="reviewMenu" class="hidden">
 <h2>Review Kategori</h2>
 <div id="reviewCategoryList" class="grid"></div>
 <button class="btn dark" onclick="goHome()">‚¨Ö Kembali</button>
</div>

<!-- REVIEW PLAY -->
<div id="reviewPlay" class="hidden">
 <button class="btn dark" onclick="openReviewMenu()">‚¨Ö Back</button>
 <div class="card">
  <div id="reviewIcon" class="big"></div>
  <h2 id="reviewText"></h2>
 </div>
 <button class="btn" onclick="prevReview()">‚¨Ö</button>
 <button class="btn" onclick="nextReview()">‚û°</button>
 <button class="btn dark" onclick="speak()">üîä Sound</button>
</div>

</div>

<audio id="correctSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_5c6c8f36fa.mp3"></audio>
<audio id="wrongSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_3a3d6c6aef.mp3"></audio>

<script>
const categories=[
"animals","food","jobs","sports","transport","home","computer","body",
"music","colors","numbers","letters","hospital","garden","kitchen",
"bathroom","countries","places","things","nature","buildings","subjects"
];

const data={
 animals:[
  ["üê±","kucing","cat"],["üê∂","anjing","dog"],["üêÆ","sapi","cow"],
  ["üêî","ayam","chicken"],["üêü","ikan","fish"]
 ],
 food:[
  ["üçé","apel","apple"],["üçå","pisang","banana"],
  ["üçö","nasi","rice"],["üçû","roti","bread"]
 ],
 jobs:[
  ["üëÆ","polisi","police"],["üë®‚Äç‚öïÔ∏è","dokter","doctor"],
  ["üë®‚Äçüè´","guru","teacher"]
 ]
};

categories.forEach(c=>{
 if(!data[c]){
  data[c]=[
   ["‚≠ê","bintang","star"],
   ["üì¶","kotak","box"],
   ["üè†","rumah","house"],
   ["üöó","mobil","car"],
   ["üå≥","pohon","tree"]
  ];
 }
});

let current=[],i=0,score=0,time=10,timer;
let reviewCat="",reviewIndex=0;

function show(id){
 ["home","categories","game","over","reviewMenu","reviewPlay"]
 .forEach(x=>document.getElementById(x).classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}
function goHome(){clearInterval(timer);show("home");}

function openCategories(){
 show("categories");
 categoryList.innerHTML="";
 categories.forEach(c=>{
  let b=document.createElement("button");
  b.className="btn";
  b.textContent=c.toUpperCase();
  b.onclick=()=>startGame(c);
  categoryList.appendChild(b);
 });
}

function startGame(cat){
 current=[...data[cat]];
 i=0;score=0;
 show("game");
 nextQuestion();
}

function nextQuestion(){
 if(i>=current.length){endGame();return;}
 let q=current[i];
 icon.textContent=q[0];
 question.textContent=`Apa bahasa Inggris dari "${q[1]}"?`;
 options.innerHTML="";
 let answers=[q[2]];
 while(answers.length<4){
  let r=current[Math.random()*current.length|0][2];
  if(!answers.includes(r))answers.push(r);
 }
 answers.sort(()=>Math.random()-.5);
 answers.forEach(a=>{
  let d=document.createElement("div");
  d.className="option";
  d.textContent=a;
  d.onclick=()=>check(a,q[2],d);
  options.appendChild(d);
 });
 startTimer();
}

function check(a,c,el){
 clearInterval(timer);
 document.querySelectorAll(".option").forEach(o=>o.style.pointerEvents="none");
 if(a===c){el.classList.add("correct");correctSound.play();score+=10;}
 else{el.classList.add("wrong");wrongSound.play();}
 i++;setTimeout(nextQuestion,700);
}

function startTimer(){
 time=10;timeEl.textContent=time;
 timer=setInterval(()=>{
  time--;timeEl.textContent=time;
  if(time<=0){clearInterval(timer);i++;nextQuestion();}
 },1000);
}

function endGame(){
 finalScore.textContent="Score: "+score;
 show("over");
}

/* REVIEW */
function openReviewMenu(){
 show("reviewMenu");
 reviewCategoryList.innerHTML="";
 categories.forEach(c=>{
  let b=document.createElement("button");
  b.className="btn";
  b.textContent=c.toUpperCase();
  b.onclick=()=>openReview(c);
  reviewCategoryList.appendChild(b);
 });
}

function openReview(c){
 reviewCat=c;reviewIndex=0;
 show("reviewPlay");updateReview();
}

function updateReview(){
 let d=data[reviewCat][reviewIndex];
 reviewIcon.textContent=d[0];
 reviewText.textContent=`${d[1]} = ${d[2]}`;
}

function nextReview(){reviewIndex=(reviewIndex+1)%data[reviewCat].length;updateReview();}
function prevReview(){reviewIndex=(reviewIndex-1+data[reviewCat].length)%data[reviewCat].length;updateReview();}
function speak(){
 let u=new SpeechSynthesisUtterance(data[reviewCat][reviewIndex][2]);
 u.lang="en-US";speechSynthesis.speak(u);
}
</script>
</body>
</html>
