<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>English Learning Game</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#141e30,#243b55);
  color:white;
  text-align:center;
}
.page{display:none}
.page.active{display:block}
button{
  padding:12px 22px;
  margin:6px;
  border:none;
  border-radius:14px;
  font-size:16px;
  cursor:pointer;
}
button:hover{transform:scale(1.05)}
.menu button{background:#ffcc00;color:#333}
.answer{background:white;color:#333;width:220px}
.correct{background:#4caf50!important;color:white}
.wrong{background:#e53935!important;color:white}
.top{
  display:flex;
  justify-content:space-between;
  padding:10px 20px;
}
.big{font-size:80px}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="page active">
  <h1>üéÆ English Learning Game</h1>
  <button onclick="openLevel()">Start Game</button>
  <button onclick="openReviewMenu()">Review</button>
</div>

<!-- LEVEL -->
<div id="level" class="page">
  <h2>Select Level</h2>
  <button onclick="startGame('easy')">Easy</button>
  <button onclick="startGame('medium')">Medium</button>
  <button onclick="startGame('hard')">Hard</button><br><br>
  <button onclick="show('menu')">‚¨Ö Back</button>
</div>

<!-- GAME -->
<div id="game" class="page">
  <div class="top">
    <span id="timer">‚è± 5</span>
    <span id="score">‚≠ê 0</span>
  </div>
  <div id="icon" class="big"></div>
  <h2 id="question"></h2>
  <div id="answers"></div>
</div>

<!-- GAME OVER -->
<div id="over" class="page">
  <h1>Game Over</h1>
  <h2 id="finalScore"></h2>
  <button onclick="retry()">Retry</button>
  <button onclick="show('menu')">Menu</button>
</div>

<!-- REVIEW MENU -->
<div id="reviewMenu" class="page">
  <h2>Review Categories</h2>
  <div id="reviewButtons"></div>
  <br>
  <button onclick="show('menu')">‚¨Ö Back</button>
</div>

<!-- REVIEW -->
<div id="review" class="page">
  <button onclick="prevReview()">‚¨Ö</button>
  <button onclick="nextReview()">‚û°</button>
  <div id="reviewIcon" class="big"></div>
  <h2 id="reviewText"></h2>
  <button onclick="toggleText()">Text ON / OFF</button>
  <br><br>
  <button onclick="show('reviewMenu')">Back</button>
</div>

<script>
/* PAGE */
function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* SOUND */
function beep(f){
  const c=new AudioContext();
  const o=c.createOscillator();
  o.frequency.value=f;
  o.connect(c.destination);
  o.start();
  o.stop(c.currentTime+.15);
}

/* DATA (20+ KATEGORI, ‚â•15 SOAL BISA DITAMBAH) */
const data={
animals: gen([
 ['kucing','Cat','üê±'],['anjing','Dog','üê∂'],['sapi','Cow','üêÆ'],
 ['ikan','Fish','üêü'],['burung','Bird','üê¶'],['kuda','Horse','üê¥'],
 ['ayam','Chicken','üêî'],['bebek','Duck','ü¶Ü'],['ular','Snake','üêç'],
 ['singa','Lion','ü¶Å'],['gajah','Elephant','üêò'],['harimau','Tiger','üêØ'],
 ['monyet','Monkey','üêí'],['kambing','Goat','üêê'],['kelinci','Rabbit','üê∞']
]),
food: gen([
 ['nasi','Rice','üçö'],['apel','Apple','üçé'],['roti','Bread','üçû'],
 ['ayam','Chicken','üçó'],['ikan','Fish','üêü'],['susu','Milk','ü•õ'],
 ['keju','Cheese','üßÄ'],['pisang','Banana','üçå'],['jeruk','Orange','üçä'],
 ['telur','Egg','ü•ö'],['daging','Meat','ü•©'],['kue','Cake','üéÇ'],
 ['sup','Soup','üç≤'],['mie','Noodles','üçú'],['es krim','Ice Cream','üç®']
]),
sports: gen([
 ['sepak bola','Football','‚öΩ'],['basket','Basketball','üèÄ'],
 ['voli','Volleyball','üèê'],['tenis','Tennis','üéæ'],['lari','Running','üèÉ'],
 ['renang','Swimming','üèä'],['bulutangkis','Badminton','üè∏'],
 ['tinju','Boxing','ü•ä'],['golf','Golf','‚õ≥'],['panahan','Archery','üèπ'],
 ['bersepeda','Cycling','üö¥'],['selancar','Surfing','üèÑ'],
 ['angkat beban','Weightlifting','üèãÔ∏è'],['ski','Skiing','üéø'],['yoga','Yoga','üßò']
]),
jobs: gen([
 ['guru','Teacher','üë©‚Äçüè´'],['dokter','Doctor','üë®‚Äç‚öïÔ∏è'],
 ['polisi','Police','üëÆ'],['petani','Farmer','üë®‚Äçüåæ'],
 ['pilot','Pilot','‚úàÔ∏è'],['perawat','Nurse','üßë‚Äç‚öïÔ∏è'],
 ['koki','Chef','üë®‚Äçüç≥'],['sopir','Driver','üöó'],
 ['penyanyi','Singer','üé§'],['aktor','Actor','üé≠'],
 ['arsitek','Architect','üèóÔ∏è'],['penulis','Writer','‚úçÔ∏è'],
 ['nelayan','Fisherman','üé£'],['programmer','Programmer','üíª'],
 ['mekanik','Mechanic','üîß']
]),
transport: gen([
 ['mobil','Car','üöó'],['motor','Motorcycle','üèçÔ∏è'],
 ['bus','Bus','üöå'],['kereta','Train','üöÜ'],['pesawat','Plane','‚úàÔ∏è'],
 ['kapal','Ship','üö¢'],['sepeda','Bicycle','üö≤'],
 ['taksi','Taxi','üöï'],['truk','Truck','üöö'],
 ['ambulans','Ambulance','üöë'],['helikopter','Helicopter','üöÅ'],
 ['perahu','Boat','üö§'],['becak','Rickshaw','üõ∫'],
 ['subway','Subway','üöá'],['tram','Tram','üöä']
])
};

/* GENERATOR */
function gen(arr){
  return arr.map(x=>({id:x[0],en:x[1],icon:x[2]}));
}

/* GAME LOGIC */
let list=[],i=0,score=0,time=5,timer,level='';
function openLevel(){show('level')}
function startGame(lv){
  level=lv;
  list=Object.values(data).flat();
  shuffle(list);
  i=0;score=0;
  show('game');load();
}
function load(){
  if(i>=list.length){end();return}
  clearInterval(timer);
  time=5;
  document.getElementById('timer').innerText='‚è± '+time;
  document.getElementById('score').innerText='‚≠ê '+score;
  const q=list[i];
  icon.innerText=q.icon;
  question.innerText=`Apa bahasa Inggris dari "${q.id}"?`;
  answers.innerHTML='';
  const opts=shuffle([q.en,...shuffle(list).slice(0,3).map(x=>x.en)]);
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='answer';b.innerText=o;
    b.onclick=()=>{
      clearInterval(timer);
      if(o===q.en){b.classList.add('correct');score++;beep(700)}
      else{b.classList.add('wrong');beep(200)}
      setTimeout(()=>{i++;load()},400);
    };
    answers.appendChild(b);
  });
  timer=setInterval(()=>{
    time--;timerTxt.innerText='‚è± '+time;
    if(time<=0){clearInterval(timer);end()}
  },1000);
}
function end(){
  finalScore.innerText=`Score: ${score} / ${list.length}`;
  show('over');
}
function retry(){startGame(level)}

/* REVIEW */
let rcat='',rindex=0,showText=true;
function openReviewMenu(){
  show('reviewMenu');
  reviewButtons.innerHTML='';
  for(let c in data){
    let b=document.createElement('button');
    b.textContent=c;
    b.onclick=()=>openReview(c);
    reviewButtons.appendChild(b);
  }
}
function openReview(c){rcat=c;rindex=0;showText=true;show('review');updateReview()}
function updateReview(){
  let d=data[rcat][rindex];
  reviewIcon.innerText=d.icon;
  reviewText.innerText=showText?`${d.id} = ${d.en}`:'';
}
function nextReview(){rindex=(rindex+1)%data[rcat].length;updateReview()}
function prevReview(){rindex=(rindex-1+data[rcat].length)%data[rcat].length;updateReview()}
function toggleText(){showText=!showText;updateReview()}

/* UTIL */
function shuffle(a){return a.sort(()=>Math.random()-.5)}
const timerTxt=document.getElementById('timer');
</script>

</body>
</html>
