<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>English Learning Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff;text-align:center}
.hidden{display:none}
.container{max-width:520px;margin:auto;padding:20px}
.card{background:rgba(255,255,255,.15);border-radius:20px;padding:20px;margin-top:20px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
.btn{width:100%;padding:14px;border:none;border-radius:16px;margin:8px 0;font-weight:bold;cursor:pointer}
.btn{background:#fff;color:#0077ff}
.btn.dark{background:#222;color:#fff}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
.option{background:#fff;color:#0077ff;padding:12px;border-radius:14px;margin:6px 0;font-weight:bold;cursor:pointer}
.correct{background:#2ecc71!important}
.wrong{background:#e74c3c!important;color:#fff}
.timer{font-weight:bold}
.big{font-size:80px}
</style>
</head>

<body>
<div class="container">

<div id="home">
 <div class="card">
  <h1>üéÆ English Learning Game</h1>
  <button class="btn" onclick="openCategories()">‚ñ∂ START</button>
  <button class="btn dark" onclick="openReviewMenu()">üìò REVIEW</button>
 </div>
</div>

<div id="categories" class="hidden">
 <h2>Pilih Kategori</h2>
 <div id="categoryList" class="grid"></div>
 <button class="btn dark" onclick="goHome()">‚¨Ö Kembali</button>
</div>

<div id="game" class="hidden">
 <div class="timer">‚è± <span id="time">10</span></div>
 <div class="card">
  <div id="icon" class="big"></div>
  <h2 id="question"></h2>
 </div>
 <div id="options"></div>
</div>

<div id="over" class="hidden">
 <div class="card">
  <h2 id="finalScore"></h2>
  <button class="btn" onclick="openCategories()">Main Lagi</button>
  <button class="btn dark" onclick="goHome()">Home</button>
 </div>
</div>

<div id="reviewMenu" class="hidden">
 <h2>Review Kategori</h2>
 <div id="reviewCategoryList" class="grid"></div>
 <button class="btn dark" onclick="goHome()">‚¨Ö Kembali</button>
</div>

<div id="reviewPlay" class="hidden">
 <button class="btn dark" onclick="openReviewMenu()">‚¨Ö Back</button>
 <div class="card">
  <div id="reviewIcon" class="big"></div>
  <h2 id="reviewText"></h2>
 </div>
 <button class="btn" onclick="prevReview()">‚¨Ö</button>
 <button class="btn" onclick="nextReview()">‚û°</button>
 <button class="btn dark" onclick="speak()">üîä Sound</button>
</div>

</div>

<audio id="correctSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_5c6c8f36fa.mp3"></audio>
<audio id="wrongSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_3a3d6c6aef.mp3"></audio>
<audio id="timeoutSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_4e0e4c2c3f.mp3"></audio>

<script>
/* ===== DATA 24 KATEGORI ===== */
const data={
animals:[["üê±","kucing","cat"],["üê∂","anjing","dog"],["üêÆ","sapi","cow"],["üêî","ayam","chicken"]],
food:[["üçé","apel","apple"],["üçå","pisang","banana"],["üçö","nasi","rice"],["üçû","roti","bread"]],
clothes:[["üëï","baju","shirt"],["üëñ","celana","pants"],["üëó","gaun","dress"],["üëü","sepatu","shoes"]],
jobs:[["üëÆ","polisi","police"],["üë®‚Äç‚öïÔ∏è","dokter","doctor"],["üë®‚Äçüè´","guru","teacher"],["üë®‚Äçüç≥","koki","chef"]],
sports:[["‚öΩ","sepak bola","football"],["üèÄ","basket","basketball"],["üè∏","bulu tangkis","badminton"]],
personal:[["üë®","pria","man"],["üë©","wanita","woman"],["üë∂","bayi","baby"]],
transport:[["üöó","mobil","car"],["üöå","bus","bus"],["‚úàÔ∏è","pesawat","airplane"]],
home:[["üõèÔ∏è","tempat tidur","bed"],["ü™ë","kursi","chair"],["üö™","pintu","door"]],
computer:[["‚å®Ô∏è","keyboard","keyboard"],["üñ±Ô∏è","mouse","mouse"],["üñ•Ô∏è","monitor","monitor"]],
nature:[["üå≥","pohon","tree"],["üå∏","bunga","flower"],["üåû","matahari","sun"]],
buildings:[["üè´","sekolah","school"],["üè•","rumah sakit","hospital"],["üè†","rumah","house"]],
subjects:[["üìò","buku","book"],["‚úèÔ∏è","pensil","pencil"],["üìê","penggaris","ruler"]],
music:[["üé∏","gitar","guitar"],["üéπ","piano","piano"],["ü•Å","drum","drum"]],
body:[["üëÄ","mata","eye"],["üëÇ","telinga","ear"],["üëÉ","hidung","nose"]],
hospital:[["üíä","obat","medicine"],["ü©∫","stetoskop","stethoscope"]],
garden:[["üå±","tanaman","plant"],["üåº","bunga","flower"]],
countries:[["üáÆüá©","Indonesia","Indonesia"],["üáØüáµ","Jepang","Japan"]],
kitchen:[["üç≥","wajan","pan"],["ü•Ñ","sendok","spoon"]],
bathroom:[["üöø","shower","shower"],["ü™•","sikat gigi","toothbrush"]],
places:[["üèñÔ∏è","pantai","beach"],["üèîÔ∏è","gunung","mountain"]],
things:[["üì±","ponsel","phone"],["üéí","tas","bag"]],
letters:[["A","huruf A","A"],["B","huruf B","B"]],
colors:[["üî¥","merah","red"],["üîµ","biru","blue"]],
numbers:[["1Ô∏è‚É£","satu","one"],["2Ô∏è‚É£","dua","two"]]
};

const categories=Object.keys(data);

/* ===== LOGIC GAME (SAMA STABIL) ===== */
let current=[],i=0,score=0,time=10,timer;
let reviewCat="",reviewIndex=0;

function show(id){
 ["home","categories","game","over","reviewMenu","reviewPlay"]
 .forEach(x=>document.getElementById(x).classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}
function goHome(){clearInterval(timer);show("home");}

function openCategories(){
 show("categories");categoryList.innerHTML="";
 categories.forEach(c=>{
  let b=document.createElement("button");
  b.className="btn";b.textContent=c.toUpperCase();
  b.onclick=()=>startGame(c);categoryList.appendChild(b);
 });
}

function startGame(cat){
 current=[...data[cat]];i=0;score=0;show("game");nextQuestion();
}

function nextQuestion(){
 if(i>=current.length){finalScore.textContent="Score: "+score;show("over");return;}
 let q=current[i];
 icon.textContent=q[0];
 question.textContent=`Apa bahasa Inggris dari "${q[1]}"?`;
 options.innerHTML="";
 let ans=[q[2]];
 while(ans.length<4){
  let r=current[Math.random()*current.length|0][2];
  if(!ans.includes(r))ans.push(r);
 }
 ans.sort(()=>Math.random()-.5);
 ans.forEach(a=>{
  let d=document.createElement("div");
  d.className="option";d.textContent=a;
  d.onclick=()=>check(a,q[2],d);
  options.appendChild(d);
 });
 startTimer();
}

function check(a,c,el){
 clearInterval(timer);
 document.querySelectorAll(".option").forEach(o=>o.style.pointerEvents="none");
 if(a===c){el.classList.add("correct");correctSound.play();score+=10}
 else{el.classList.add("wrong");wrongSound.play()}
 i++;setTimeout(nextQuestion,700);
}

function startTimer(){
 time=10;timeEl.textContent=time;
 timer=setInterval(()=>{
  time--;timeEl.textContent=time;
  if(time<=0){timeoutSound.play();clearInterval(timer);i++;nextQuestion()}
 },1000);
}

/* REVIEW */
function openReviewMenu(){
 show("reviewMenu");reviewCategoryList.innerHTML="";
 categories.forEach(c=>{
  let b=document.createElement("button");
  b.className="btn";b.textContent=c.toUpperCase();
  b.onclick=()=>{reviewCat=c;reviewIndex=0;show("reviewPlay");updateReview()}
  reviewCategoryList.appendChild(b);
 });
}
function updateReview(){
 let d=data[reviewCat][reviewIndex];
 reviewIcon.textContent=d[0];
 reviewText.textContent=`${d[1]} = ${d[2]}`;
}
function nextReview(){reviewIndex=(reviewIndex+1)%data[reviewCat].length;updateReview()}
function prevReview(){reviewIndex=(reviewIndex-1+data[reviewCat].length)%data[reviewCat].length;updateReview()}
function speak(){
 let u=new SpeechSynthesisUtterance(data[reviewCat][reviewIndex][2]);
 u.lang="en-US";speechSynthesis.speak(u);
}
</script>
</body>
</html>
